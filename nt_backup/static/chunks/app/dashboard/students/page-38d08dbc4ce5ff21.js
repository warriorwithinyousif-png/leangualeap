(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{14632:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(95155),r=s(66695),l=s(9086),d=s(66766),n=s(20794),i=s(35695),o=s(12115),c=s(30285),m=s(94063),u=s(30462),x=s(37648),p=s(25299),f=s(49545),h=s(85268),w=s(8376),g=s(24371),y=s(77223),v=s(90010),N=s(87481),j=s(23478),b=s(79556),S=s(59434);let T=j.bL,A=o.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j.q7,{ref:t,className:(0,S.cn)("border-b",s),...r})});A.displayName="AccordionItem";let k=o.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsx)(j.Y9,{className:"flex",children:(0,a.jsxs)(j.l9,{ref:t,className:(0,S.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...l,children:[r,(0,a.jsx)(b.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});k.displayName=j.l9.displayName;let D=o.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsx)(j.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,a.jsx)("div",{className:(0,S.cn)("pb-4 pt-0",s),children:r})})});D.displayName=j.UC.displayName;var R=s(78816),C=s(96416),_=s(6874),I=s.n(_),L=s(47262),O=s(44642);let E=()=>{let e=[];for(let t=0;t<7;t++){let s=(0,R.e)(new Date,t);e.push({date:(0,C.GP)(s,"yyyy-MM-dd"),dayInitial:(0,C.GP)(s,"E")[0]})}return e.reverse()},P=["Present Simple","Past Simple","Present Continuous","Comprehensive"];function M(){let e=(0,i.useSearchParams)(),{t}=(0,n.o)(),{toast:s}=(0,N.dj)(),[j,b]=(0,o.useState)(null),[S,R]=(0,o.useState)([]),C=E(),_=e.get("userId"),M=(0,o.useCallback)(async()=>{if(_){let e=await (0,l.kl)(_);if(b(e||null),e){let e=(await (0,l.HV)(_)).map(async e=>{let t=await (0,O.MI)(e.id),s=await (0,l.Im)(e.id),a=s.filter(e=>-1===e.strength).length,r=s.length-a;return{...e,stats:t,wordsLearningCount:r,wordsMasteredCount:a}});R(await Promise.all(e))}}},[_]);(0,o.useEffect)(()=>{M()},[M]);let W=async e=>{try{R(t=>t.filter(t=>t.id!==e));let t=await (0,l.kl)(e);if(t)t.supervisorId=void 0,await (0,l.PF)(t),s({title:"Success!",description:"Student has been removed from your list."});else throw Error("Student not found.")}catch(e){s({title:"Error",description:"Could not remove the student.",variant:"destructive"}),M()}},Z=e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?"".concat(t,"h ").concat(s,"m"):"".concat(s,"m")};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-headline",children:t("studentsPage.title")}),(0,a.jsx)("p",{className:"text-muted-foreground",children:t("studentsPage.description",(null==j?void 0:j.name)||"")}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:t("studentsPage.allStudents.title")}),(0,a.jsx)(r.BT,{children:t("studentsPage.allStudents.description")})]}),(0,a.jsx)(r.Wu,{children:S.length>0?(0,a.jsx)(T,{type:"single",collapsible:!0,className:"w-full",children:S.map(e=>(0,a.jsxs)(A,{value:e.id,children:[(0,a.jsxs)(k,{className:"hover:bg-muted/50 px-4 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 py-2 flex-1",children:[(0,a.jsx)(d.default,{alt:"Student avatar",className:"aspect-square rounded-full object-contain",height:"48",src:e.avatar,width:"48"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]})]}),(0,a.jsx)(c.$,{asChild:!0,variant:"ghost",size:"icon",className:"mr-4",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(I(),{href:"/dashboard/chat?userId=".concat(_,"&contactId=").concat(e.id),children:(0,a.jsx)(m.A,{className:"h-5 w-5"})})})]}),(0,a.jsxs)(D,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-lg bg-secondary",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 text-primary mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.stats.xp}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t("championPage.xp")})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-lg bg-secondary",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 text-primary mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:Z(e.stats.timeSpentSeconds)}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t("dashboard.student.progressOverview.timeSpent")})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-lg bg-secondary",children:[(0,a.jsx)(p.A,{className:"h-8 w-8 text-primary mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.stats.totalWordsReviewed}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t("dashboard.student.progressOverview.wordsReviewed")})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-lg bg-secondary",children:[(0,a.jsx)(f.A,{className:"h-8 w-8 text-primary mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.stats.reviewedNow}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t("dashboard.student.progressOverview.reviewedToday")})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-lg bg-secondary",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 text-primary mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.wordsMasteredCount}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t("dashboard.student.progressOverview.masteredWords")})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-md font-semibold mb-2 text-center",children:"Last 7 Days Activity"}),(0,a.jsx)("div",{className:"flex justify-around items-center p-4 rounded-lg bg-secondary",children:C.map(t=>{let{date:s,dayInitial:r}=t,l=e.stats.activityLog.includes(s);return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:r}),l?(0,a.jsx)(w.A,{className:"h-6 w-6 text-green-500"}):(0,a.jsx)(g.A,{className:"h-6 w-6 text-muted-foreground/50"})]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-md font-semibold mb-2 text-center",children:"Tests Completed Today"}),(0,a.jsx)("div",{className:"p-4 rounded-lg bg-secondary space-y-3",children:P.map(t=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.S,{id:"test-".concat(e.id,"-").concat(t),checked:e.stats.reviewedToday.completedTests.includes(t),disabled:!0}),(0,a.jsx)("label",{htmlFor:"test-".concat(e.id,"-").concat(t),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t})]},t))})]})]}),(0,a.jsx)("div",{className:"pt-4 flex justify-end",children:(0,a.jsxs)(v.Lt,{children:[(0,a.jsx)(v.tv,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"destructive",children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Remove Student"]})}),(0,a.jsxs)(v.EO,{children:[(0,a.jsxs)(v.wd,{children:[(0,a.jsx)(v.r7,{children:"Are you absolutely sure?"}),(0,a.jsxs)(v.$v,{children:["This action cannot be undone. This will permanently remove ",e.name," from your supervision. Their account will not be deleted, but they will lose access to your words and their progress will be reset."]})]}),(0,a.jsxs)(v.ck,{children:[(0,a.jsx)(v.Zr,{children:"Cancel"}),(0,a.jsx)(v.Rx,{onClick:()=>W(e.id),children:"Continue"})]})]})]})})]})]},e.id))}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-12",children:"No students have registered with your ID yet."})})]})]})}},43082:(e,t,s)=>{Promise.resolve().then(s.bind(s,14632))},44642:(e,t,s)=>{"use strict";s.d(t,{MI:()=>u,kh:()=>x,np:()=>p});var a=s(95155),r=s(34548),l=s(30347),d=s(60922),n=s(35317),i=s(4382);let o={review_word:5,spell_correct:5,daily_login:20,master_word:10,grammar_test:20},c=e=>({timeSpentSeconds:0,totalWordsReviewed:0,xp:0,reviewedToday:{count:0,date:e,timeSpentSeconds:0,completedTests:[]},activityLog:[],spellingPractice:{count:0,date:e},lastLoginDate:"1970-01-01",weekStartDate:(0,r.k)(new Date,{weekStartsOn:1}).toISOString(),lastWeek:null,hasSeenLastWeekResults:!0});async function m(e){let t=query((0,n.rJ)(i.db,"users"),where("supervisorId","==",e)),s=await (0,n.GG)(t);return await Promise.all(s.docs.map(async e=>{let t={...e.data(),id:e.id},s=await u(t.id);return{user:t,stats:s}}))}let u=async e=>{var t,s;let a,d,o=new Date,u=o.toLocaleDateString("en-CA"),x=(0,r.k)(o,{weekStartsOn:1}),p="".concat(o.getFullYear(),"-").concat((0,l.N)(o,{weekStartsOn:1})),h=(0,n.H9)(i.db,"users/".concat(e,"/app-data/stats")),w=await (0,n.x7)(h);w.exists()?a=w.data():(a=c(u),await (0,n.BN)(h,a)),"number"!=typeof a.xp&&(a.xp=0),a.lastLoginDate||(a.lastLoginDate="1970-01-01"),a.weekStartDate||(a.weekStartDate=x.toISOString()),"boolean"!=typeof a.hasSeenLastWeekResults&&(a.hasSeenLastWeekResults=!0);let g=new Date(a.weekStartDate),y="".concat(g.getFullYear(),"-").concat((0,l.N)(g,{weekStartsOn:1}));if(p!==y&&!(null==(s=a.lastWeek)||null==(t=s.weekId)?void 0:t.endsWith(y))&&(null==(d=await f(e))?void 0:d.supervisorId)){let e=await m(d.supervisorId),t=e.map(e=>{let{user:t,stats:s}=e;return{...t,xp:s.xp}}).sort((e,t)=>t.xp-e.xp).slice(0,3).map((e,t)=>({id:e.id,name:e.name,avatar:e.avatar,xp:e.xp,rank:t+1}));for(let{user:s}of e){let e=(0,n.H9)(i.db,"users/".concat(s.id,"/app-data/stats"));await (0,n.BN)(e,{xp:0,weekStartDate:x.toISOString(),lastWeek:{weekId:y,winners:t},hasSeenLastWeekResults:!1},{merge:!0})}let s=await (0,n.x7)(h);s.exists()&&(a=s.data())}return a.reviewedToday&&a.reviewedToday.date===u||(a.reviewedToday={count:0,date:u,timeSpentSeconds:0,completedTests:[]}),a.spellingPractice&&a.spellingPractice.date===u||(a.spellingPractice={count:0,date:u}),Array.isArray(a.activityLog)||(a.activityLog=[]),Array.isArray(a.reviewedToday.completedTests)||(a.reviewedToday.completedTests=[]),"number"!=typeof a.reviewedToday.timeSpentSeconds&&(a.reviewedToday.timeSpentSeconds=0),a},x=async(e,t)=>{if(!e)return{updated:!1,amount:0};let s=await u(e),a=o[t],r=new Date().toLocaleDateString("en-CA");if("daily_login"===t){if(s.lastLoginDate===r)return{updated:!1,amount:0};s.lastLoginDate=r}s.xp+=a;let l=(0,n.H9)(i.db,"users/".concat(e,"/app-data/stats"));return await (0,n.BN)(l,s,{merge:!0}),{updated:!0,amount:a}},p=async e=>{let{userId:t,reviewedCount:s=0,durationSeconds:r=0,testName:l,spelledCount:c=0,toast:m,markAsSeen:x=!1}=e;if(!t)return;let p=await u(t),f=new Date().toLocaleDateString("en-CA");p.totalWordsReviewed+=s,p.timeSpentSeconds+=r,p.reviewedToday.count+=s,p.reviewedToday.timeSpentSeconds+=r,p.spellingPractice.count+=c,p.activityLog.includes(f)||p.activityLog.push(f),l&&!p.reviewedToday.completedTests.includes(l)&&(p.reviewedToday.completedTests.push(l),p.xp+=o.grammar_test,m&&m({description:(0,a.jsx)(d.Y,{event:"grammar_test",amount:o.grammar_test}),duration:3e3})),x&&(p.hasSeenLastWeekResults=!0);let h=(0,n.H9)(i.db,"users/".concat(t,"/app-data/stats"));await (0,n.BN)(h,p,{merge:!0})};async function f(e){if(!e)return;let t=(0,n.H9)(i.db,"users",e),s=await (0,n.x7)(t);if(!s.exists())return;let a=s.data();return a.trialExpiresAt&&a.trialExpiresAt instanceof Timestamp&&(a.trialExpiresAt=a.trialExpiresAt.toDate().toISOString()),{...a,id:s.id}}},47262:(e,t,s)=>{"use strict";s.d(t,{S:()=>i});var a=s(95155),r=s(12115),l=s(76981),d=s(10518),n=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})})});i.displayName=l.bL.displayName},59434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(52596),r=s(39688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},60922:(e,t,s)=>{"use strict";s.d(t,{Y:()=>m});var a=s(95155),r=s(31550),l=s(77724),d=s(51920),n=s(85268),i=s(30462),o=s(20794);let c={review_word:(0,a.jsx)(r.A,{className:"h-5 w-5 text-green-500"}),spell_correct:(0,a.jsx)(l.A,{className:"h-5 w-5 text-green-500"}),daily_login:(0,a.jsx)(d.A,{className:"h-5 w-5 text-green-500"}),master_word:(0,a.jsx)(n.A,{className:"h-5 w-5 text-yellow-500"}),grammar_test:(0,a.jsx)(n.A,{className:"h-5 w-5 text-yellow-500"})};function m(e){let{event:t,amount:s}=e,{t:r}=(0,o.o)(),l=r("xpEvents.".concat(t)),d=c[t];return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[d,(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-semibold",children:l}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm text-yellow-500 font-bold",children:["+",s," XP",(0,a.jsx)(i.A,{className:"h-4 w-4 fill-current"})]})]})]})}},66695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>d,aR:()=>n,wL:()=>m});var a=s(95155),r=s(12115),l=s(59434);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});d.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});m.displayName="CardFooter"},87481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(12115);let r=0,l=new Map,d=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?d(s):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],o={toasts:[]};function c(e){o=n(o,e),i.forEach(e=>{e(o)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(o);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},90010:(e,t,s)=>{"use strict";s.d(t,{$v:()=>h,EO:()=>u,Lt:()=>i,Rx:()=>w,Zr:()=>g,ck:()=>p,r7:()=>f,tv:()=>o,wd:()=>x});var a=s(95155),r=s(12115),l=s(17649),d=s(59434),n=s(30285);let i=l.bL,o=l.l9,c=l.ZL,m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});m.displayName=l.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});u.displayName=l.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-start",t),...s})};x.displayName="AlertDialogHeader";let p=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};p.displayName="AlertDialogFooter";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold",s),...r})});f.displayName=l.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s),...r})});h.displayName=l.VY.displayName;let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.rc,{ref:t,className:(0,d.cn)((0,n.r)(),s),...r})});w.displayName=l.rc.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.ZD,{ref:t,className:(0,d.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});g.displayName=l.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7416,4277,2557,3559,7414,6874,2075,6766,1298,7649,6416,6191,794,1858,8441,1684,7358],()=>t(43082)),_N_E=e.O()}]);