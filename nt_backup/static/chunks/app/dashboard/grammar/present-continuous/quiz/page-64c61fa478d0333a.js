(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{24413:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var n=t(95155),r=t(12115),l=t(35695),a=t(32091),c=t(66695),i=t(30285),o=t(30356),u=t(85057),d=t(50172),h=t(67554),x=t(59434),m=t(55365),f=t(44642),j=t(87481);let p="Present Continuous";function v(){let e=(0,l.useSearchParams)().get("userId"),[s,t]=(0,r.useState)(null),[v,b]=(0,r.useState)(!0),[g,N]=(0,r.useState)(null),[w,y]=(0,r.useState)({}),[k,C]=(0,r.useState)(!1),E=(0,r.useRef)(null),{toast:T}=(0,j.dj)(),q=(0,r.useCallback)(async(s,t)=>{e&&await (0,f.np)({userId:e,durationSeconds:s,testName:t,toast:T})},[e,T]);(0,r.useEffect)(()=>{E.current=Date.now();let e=()=>{if(E.current){let e=Math.round((Date.now()-E.current)/1e3);e>0&&q(e),E.current=null}};return window.addEventListener("beforeunload",e),()=>{e(),window.removeEventListener("beforeunload",e)}},[q]);let S=async()=>{b(!0),N(null),C(!1),y({});try{let e=await (0,a.U)({tense:p});if(e&&e.questions)t(e.questions);else throw Error("AI failed to generate quiz questions.")}catch(e){N(e instanceof Error?e.message:"An unknown error occurred.")}finally{b(!1)}};(0,r.useEffect)(()=>{S()},[]);let A=(e,s)=>{y(t=>({...t,[e]:s}))},_=(e,t)=>{if(!k)return"default";let n=t===s[e].correctOption,r=w[e]===t;return n?"correct":r&&!n?"incorrect":"default"};return v?(0,n.jsxs)("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:[(0,n.jsx)(d.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,n.jsx)("p",{className:"ml-4 text-muted-foreground",children:"Generating your quiz..."})]}):g?(0,n.jsxs)(m.Fc,{variant:"destructive",children:[(0,n.jsx)(m.XL,{children:"Error"}),(0,n.jsx)(m.TN,{children:g})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Present Continuous Test"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Test your knowledge. The questions are generated dynamically by AI."}),(0,n.jsx)("div",{className:"space-y-8",children:null==s?void 0:s.map((e,s)=>(0,n.jsxs)(c.Zp,{children:[(0,n.jsxs)(c.aR,{children:[(0,n.jsxs)(c.ZB,{children:["Question ",s+1]}),(0,n.jsx)(c.BT,{children:e.questionText})]}),(0,n.jsx)(c.Wu,{children:(0,n.jsx)(o.z,{value:w[s]||"",onValueChange:e=>A(s,e),disabled:k,children:(0,n.jsx)("div",{className:"space-y-2",children:e.options.map((e,t)=>{let r=_(s,e);return(0,n.jsxs)(u.J,{className:(0,x.cn)("flex items-center space-x-3 rounded-lg border p-3 transition-all",!k&&"cursor-pointer","correct"===r&&"border-green-500 bg-green-500/10 text-green-900 font-semibold","incorrect"===r&&"border-destructive bg-destructive/10 text-destructive font-semibold"),children:[(0,n.jsx)(o.C,{value:e,id:"".concat(s,"-").concat(t)}),(0,n.jsx)("span",{children:e})]},t)})})})})]},s))}),(0,n.jsx)("div",{className:"mt-8 flex justify-center gap-4",children:k?(0,n.jsxs)(c.Zp,{className:"p-6 text-center",children:[(0,n.jsx)(c.ZB,{children:"Test Complete!"}),(0,n.jsxs)(c.BT,{className:"mt-2",children:["You scored ",s?s.reduce((e,s,t)=>e+ +(w[t]===s.correctOption),0):0," out of ",null==s?void 0:s.length,"."]}),(0,n.jsxs)(i.$,{onClick:S,className:"mt-4",children:[(0,n.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Take a New Test"]})]}):(0,n.jsx)(i.$,{onClick:()=>{C(!0),q(0,p)},disabled:Object.keys(w).length!==(null==s?void 0:s.length),children:"Submit Answers"})})]})}},94657:(e,s,t)=>{Promise.resolve().then(t.bind(t,24413))}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,7416,4277,2557,3559,7414,1298,6551,794,237,8441,1684,7358],()=>s(94657)),_N_E=e.O()}]);