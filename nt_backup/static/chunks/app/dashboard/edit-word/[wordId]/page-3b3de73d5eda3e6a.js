(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9629],{956:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});var s=r(44598),a=r(80644);function n(e){var t=(0,s.A)(e);return+(0,a.o)(e)==+(0,a.o)(t)}},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=r(12115);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=n(e,s)),t&&(a.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},35038:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(95155),a=r(85057),n=r(62523),d=r(88539),i=r(30285),o=r(12115),l=r(87481),u=r(50172),c=r(35695),f=r(9086),m=r(66766),p=r(20794),h=r(70927);let g=e=>new Promise((t,r)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>r(e)}),x=h.Ik({word:h.Yj().min(1,"Word is required."),definition:h.Yj().min(1,"Definition is required."),unit:h.Yj().optional(),lesson:h.Yj().optional()});function v(e){let{word:t}=e,{toast:r}=(0,l.dj)(),{t:h}=(0,p.o)(),v=(0,c.useSearchParams)(),w=(0,c.useRouter)(),[b,j]=(0,o.useState)(!1),N=v.get("userId"),y=async e=>{e.preventDefault(),j(!0);let s=new FormData(e.currentTarget),a=x.safeParse({word:s.get("word"),definition:s.get("definition"),unit:s.get("unit"),lesson:s.get("lesson")});if(!a.success){var n;let e=null==(n=Object.values(a.error.flatten().fieldErrors)[0])?void 0:n[0];r({title:h("toasts.error"),description:e||"Validation failed.",variant:"destructive"}),j(!1);return}let{word:d,definition:i,unit:o,lesson:l}=a.data,u=s.get("image");try{let e;u&&u.size>0&&(e=await g(u));let s={...t,word:d,definition:i,unit:o||"",lesson:l||"",imageUrl:e||t.imageUrl};await (0,f.o6)(s),r({title:h("toasts.success"),description:h("toasts.updateWordSuccess")}),w.push("/dashboard/words?userId=".concat(N))}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred.";r({title:h("toasts.error"),description:"Failed to update word: ".concat(e),variant:"destructive"})}finally{j(!1)}};return(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsx)("input",{type:"hidden",name:"wordId",value:t.id}),(0,s.jsx)("input",{type:"hidden",name:"userId",value:N||""}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(a.J,{htmlFor:"unit",children:h("addWord.form.unitLabel")}),(0,s.jsx)(n.p,{id:"unit",name:"unit",defaultValue:t.unit,placeholder:h("addWord.form.unitPlaceholder")})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(a.J,{htmlFor:"lesson",children:h("addWord.form.lessonLabel")}),(0,s.jsx)(n.p,{id:"lesson",name:"lesson",defaultValue:t.lesson,placeholder:h("addWord.form.lessonPlaceholder")})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(a.J,{htmlFor:"word",children:h("addWord.form.wordLabel")}),(0,s.jsx)(n.p,{id:"word",name:"word",defaultValue:t.word,placeholder:h("addWord.form.wordPlaceholder"),required:!0})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(a.J,{htmlFor:"definition",children:h("addWord.form.definitionLabel")}),(0,s.jsx)(d.T,{id:"definition",name:"definition",defaultValue:t.definition,placeholder:h("addWord.form.definitionPlaceholder"),required:!0})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(a.J,{htmlFor:"image",children:h("addWord.form.imageLabel")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:h("editWord.form.currentImage")}),(0,s.jsx)(m.default,{src:t.imageUrl,alt:"Current image",width:100,height:100,className:"rounded-md"}),(0,s.jsx)(n.p,{id:"image",name:"image",type:"file",accept:"image/*"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:h("editWord.form.imageHelper")})]}),(0,s.jsx)(i.$,{type:"submit",disabled:b,className:"w-full",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),h("editWord.form.savingButton")]}):h("editWord.form.saveButton")})]})}var w=r(66695);function b(){let e=(0,c.useParams)(),t=(0,c.useSearchParams)(),{t:r}=(0,p.o)(),a=e.wordId,n=t.get("userId")||"sup1",[d,i]=(0,o.useState)(null),[l,u]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{(async()=>{a&&(i((await (0,f.Ps)(n)).find(e=>e.id===a)||null),u(!1))})()},[a,n]),l)?(0,s.jsx)("div",{children:r("dashboard.loading")}):d?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold font-headline",children:r("editWord.title")}),(0,s.jsx)("p",{className:"text-muted-foreground",children:r("editWord.description")}),(0,s.jsxs)(w.Zp,{className:"max-w-2xl",children:[(0,s.jsxs)(w.aR,{children:[(0,s.jsx)(w.ZB,{children:r("editWord.cardTitle",d.word)}),(0,s.jsx)(w.BT,{children:r("editWord.cardDescription")})]}),(0,s.jsx)(w.Wu,{children:(0,s.jsx)(v,{word:d})})]})]}):(0,s.jsx)("div",{children:"Word not found."})}},35695:(e,t,r)=>{"use strict";var s=r(18999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},40157:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,iconNode:c,...f}=e;return(0,s.createElement)("svg",{ref:t,...d,width:a,height:a,stroke:r,strokeWidth:o?24*Number(i)/Number(a):i,className:n("lucide",l),...f},[...c.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,d)=>{let{className:o,...l}=r;return(0,s.createElement)(i,{ref:d,iconNode:t,className:n("lucide-".concat(a(e)),o),...l})});return r.displayName="".concat(e),r}},44598:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(92084);function a(e){return(0,s.w)(e,Date.now())}},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),a=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>d});var s=r(95155),a=r(12115),n=r(59434);let d=a.forwardRef((e,t)=>{let{className:r,type:a,...d}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...d})});d.displayName="Input"},63655:(e,t,r)=>{"use strict";r.d(t,{hO:()=>o,sG:()=>i});var s=r(12115),a=r(47650),n=r(99708),d=r(95155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,n.TL)(`Primitive.${t}`),a=s.forwardRef((e,s)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,d.jsx)(a?r:t,{...n,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function o(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>u,ZB:()=>o,Zp:()=>d,aR:()=>i,wL:()=>c});var s=r(95155),a=r(12115),n=r(59434);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});d.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});l.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});c.displayName="CardFooter"},78039:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});var s=r(35476),a=r(92084);function n(e,t){let r=(0,s.a)(e);if(isNaN(t))return(0,a.w)(e,NaN);if(!t)return r;let n=r.getDate(),d=(0,a.w)(e,r.getTime());return(d.setMonth(r.getMonth()+t+1,0),n>=d.getDate())?d:(r.setFullYear(d.getFullYear(),d.getMonth(),n),r)}},80644:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});var s=r(35476);function a(e){let t=(0,s.a)(e);return t.setHours(0,0,0,0),t}},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var s=r(95155),a=r(12115),n=r(40968),d=r(74466),i=r(59434);let o=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),r),...a})});l.displayName=n.b.displayName},86622:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var s=r(78039);function a(e,t){return(0,s.P)(e,12*t)}},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f});var s=r(12115);let a=0,n=new Map,d=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},5e3);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?d(r):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],l={toasts:[]};function u(e){l=i(l,e),o.forEach(e=>{e(l)})}function c(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(l);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,t,r)=>{"use strict";r.d(t,{T:()=>d});var s=r(95155),a=r(12115),n=r(59434);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});d.displayName="Textarea"},88615:(e,t,r)=>{Promise.resolve().then(r.bind(r,35038))}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,7416,4277,2557,6766,6607,794,1858,8441,1684,7358],()=>t(88615)),_N_E=e.O()}]);