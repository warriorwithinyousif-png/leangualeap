"use strict";exports.id=6104,exports.ids=[6104],exports.modules={916:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82614).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},3662:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82614).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},15036:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82614).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},15098:(e,t,a)=>{a.d(t,{MI:()=>u,kh:()=>y,np:()=>m});var r=a(60687),s=a(33660),i=a(96305),n=a(43146),d=a(75535),l=a(54254);let c={review_word:5,spell_correct:5,daily_login:20,master_word:10,grammar_test:20},o=e=>({timeSpentSeconds:0,totalWordsReviewed:0,xp:0,reviewedToday:{count:0,date:e,timeSpentSeconds:0,completedTests:[]},activityLog:[],spellingPractice:{count:0,date:e},lastLoginDate:"1970-01-01",weekStartDate:(0,s.k)(new Date,{weekStartsOn:1}).toISOString(),lastWeek:null,hasSeenLastWeekResults:!0});async function p(e){let t=query((0,d.rJ)(l.db,"users"),where("supervisorId","==",e)),a=await (0,d.GG)(t);return await Promise.all(a.docs.map(async e=>{let t={...e.data(),id:e.id},a=await u(t.id);return{user:t,stats:a}}))}let u=async e=>{let t,a,r=new Date,n=r.toLocaleDateString("en-CA"),c=(0,s.k)(r,{weekStartsOn:1}),u=`${r.getFullYear()}-${(0,i.N)(r,{weekStartsOn:1})}`,y=(0,d.H9)(l.db,`users/${e}/app-data/stats`),m=await (0,d.x7)(y);m.exists()?t=m.data():(t=o(n),await (0,d.BN)(y,t)),"number"!=typeof t.xp&&(t.xp=0),t.lastLoginDate||(t.lastLoginDate="1970-01-01"),t.weekStartDate||(t.weekStartDate=c.toISOString()),"boolean"!=typeof t.hasSeenLastWeekResults&&(t.hasSeenLastWeekResults=!0);let x=new Date(t.weekStartDate),w=`${x.getFullYear()}-${(0,i.N)(x,{weekStartsOn:1})}`;if(u!==w&&!t.lastWeek?.weekId?.endsWith(w)&&(a=await f(e),a?.supervisorId)){let e=await p(a.supervisorId),r=e.map(({user:e,stats:t})=>({...e,xp:t.xp})).sort((e,t)=>t.xp-e.xp).slice(0,3).map((e,t)=>({id:e.id,name:e.name,avatar:e.avatar,xp:e.xp,rank:t+1}));for(let{user:t}of e){let e=(0,d.H9)(l.db,`users/${t.id}/app-data/stats`);await (0,d.BN)(e,{xp:0,weekStartDate:c.toISOString(),lastWeek:{weekId:w,winners:r},hasSeenLastWeekResults:!1},{merge:!0})}let s=await (0,d.x7)(y);s.exists()&&(t=s.data())}return t.reviewedToday&&t.reviewedToday.date===n||(t.reviewedToday={count:0,date:n,timeSpentSeconds:0,completedTests:[]}),t.spellingPractice&&t.spellingPractice.date===n||(t.spellingPractice={count:0,date:n}),Array.isArray(t.activityLog)||(t.activityLog=[]),Array.isArray(t.reviewedToday.completedTests)||(t.reviewedToday.completedTests=[]),"number"!=typeof t.reviewedToday.timeSpentSeconds&&(t.reviewedToday.timeSpentSeconds=0),t},y=async(e,t)=>{if(!e)return{updated:!1,amount:0};let a=await u(e),r=c[t],s=new Date().toLocaleDateString("en-CA");if("daily_login"===t){if(a.lastLoginDate===s)return{updated:!1,amount:0};a.lastLoginDate=s}a.xp+=r;let i=(0,d.H9)(l.db,`users/${e}/app-data/stats`);return await (0,d.BN)(i,a,{merge:!0}),{updated:!0,amount:r}},m=async({userId:e,reviewedCount:t=0,durationSeconds:a=0,testName:s,spelledCount:i=0,toast:o,markAsSeen:p=!1})=>{if(!e)return;let y=await u(e),m=new Date().toLocaleDateString("en-CA");y.totalWordsReviewed+=t,y.timeSpentSeconds+=a,y.reviewedToday.count+=t,y.reviewedToday.timeSpentSeconds+=a,y.spellingPractice.count+=i,y.activityLog.includes(m)||y.activityLog.push(m),s&&!y.reviewedToday.completedTests.includes(s)&&(y.reviewedToday.completedTests.push(s),y.xp+=c.grammar_test,o&&o({description:(0,r.jsx)(n.Y,{event:"grammar_test",amount:c.grammar_test}),duration:3e3})),p&&(y.hasSeenLastWeekResults=!0);let f=(0,d.H9)(l.db,`users/${e}/app-data/stats`);await (0,d.BN)(f,y,{merge:!0})};async function f(e){if(!e)return;let t=(0,d.H9)(l.db,"users",e),a=await (0,d.x7)(t);if(!a.exists())return;let r=a.data();return r.trialExpiresAt&&r.trialExpiresAt instanceof Timestamp&&(r.trialExpiresAt=r.trialExpiresAt.toDate().toISOString()),{...r,id:a.id}}},25928:(e,t,a)=>{a.d(t,{e:()=>s});var r=a(90327);function s(e,t){return(0,r.f)(e,-t)}},26622:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82614).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},43146:(e,t,a)=>{a.d(t,{Y:()=>p});var r=a(60687),s=a(97034),i=a(51212),n=a(26622),d=a(53098),l=a(916),c=a(94363);let o={review_word:(0,r.jsx)(s.A,{className:"h-5 w-5 text-green-500"}),spell_correct:(0,r.jsx)(i.A,{className:"h-5 w-5 text-green-500"}),daily_login:(0,r.jsx)(n.A,{className:"h-5 w-5 text-green-500"}),master_word:(0,r.jsx)(d.A,{className:"h-5 w-5 text-yellow-500"}),grammar_test:(0,r.jsx)(d.A,{className:"h-5 w-5 text-yellow-500"})};function p({event:e,amount:t}){let{t:a}=(0,c.o)(),s=a(`xpEvents.${e}`),i=o[e];return(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[i,(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-semibold",children:s}),(0,r.jsxs)("span",{className:"flex items-center gap-1 text-sm text-yellow-500 font-bold",children:["+",t," XP",(0,r.jsx)(l.A,{className:"h-4 w-4 fill-current"})]})]})]})}},44493:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>l,Zp:()=>n,aR:()=>d,wL:()=>p});var r=a(60687),s=a(43210),i=a(4780);let n=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let d=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let o=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent";let p=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));p.displayName="CardFooter"},51212:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82614).A)("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]])},71839:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82614).A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},82978:(e,t,a)=>{a.d(t,{S:()=>T});var r=a(60687),s=a(43210),i=a(98599),n=a(11273),d=a(70569),l=a(65551),c=a(83721),o=a(18853),p=a(46059),u=a(14163),y="Checkbox",[m,f]=(0,n.A)(y),[x,w]=m(y);function h(e){let{__scopeCheckbox:t,checked:a,children:i,defaultChecked:n,disabled:d,form:c,name:o,onCheckedChange:p,required:u,value:m="on",internal_do_not_use_render:f}=e,[w,h]=(0,l.i)({prop:a,defaultProp:n??!1,onChange:p,caller:y}),[k,g]=s.useState(null),[v,S]=s.useState(null),b=s.useRef(!1),N=!k||!!c||!!k.closest("form"),A={checked:w,disabled:d,setChecked:h,control:k,setControl:g,name:o,form:c,value:m,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:!j(n)&&n,isFormControl:N,bubbleInput:v,setBubbleInput:S};return(0,r.jsx)(x,{scope:t,...A,children:"function"==typeof f?f(A):i})}var k="CheckboxTrigger",g=s.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...n},l)=>{let{control:c,value:o,disabled:p,checked:y,required:m,setControl:f,setChecked:x,hasConsumerStoppedPropagationRef:h,isFormControl:g,bubbleInput:v}=w(k,e),S=(0,i.s)(l,f),b=s.useRef(y);return s.useEffect(()=>{let e=c?.form;if(e){let t=()=>x(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,x]),(0,r.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":j(y)?"mixed":y,"aria-required":m,"data-state":C(y),"data-disabled":p?"":void 0,disabled:p,value:o,...n,ref:S,onKeyDown:(0,d.mK)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.mK)(a,e=>{x(e=>!!j(e)||!e),v&&g&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})});g.displayName=k;var v=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:s,checked:i,defaultChecked:n,required:d,disabled:l,value:c,onCheckedChange:o,form:p,...u}=e;return(0,r.jsx)(h,{__scopeCheckbox:a,checked:i,defaultChecked:n,disabled:l,required:d,onCheckedChange:o,name:s,form:p,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{...u,ref:t,__scopeCheckbox:a}),e&&(0,r.jsx)(A,{__scopeCheckbox:a})]})})});v.displayName=y;var S="CheckboxIndicator",b=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:s,...i}=e,n=w(S,a);return(0,r.jsx)(p.C,{present:s||j(n.checked)||!0===n.checked,children:(0,r.jsx)(u.sG.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});b.displayName=S;var N="CheckboxBubbleInput",A=s.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:n,hasConsumerStoppedPropagationRef:d,checked:l,defaultChecked:p,required:y,disabled:m,name:f,value:x,form:h,bubbleInput:k,setBubbleInput:g}=w(N,e),v=(0,i.s)(a,g),S=(0,c.Z)(l),b=(0,o.X)(n);s.useEffect(()=>{if(!k)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(S!==l&&e){let a=new Event("click",{bubbles:t});k.indeterminate=j(l),e.call(k,!j(l)&&l),k.dispatchEvent(a)}},[k,S,l,d]);let A=s.useRef(!j(l)&&l);return(0,r.jsx)(u.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??A.current,required:y,disabled:m,name:f,value:x,form:h,...t,tabIndex:-1,ref:v,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function j(e){return"indeterminate"===e}function C(e){return j(e)?"indeterminate":e?"checked":"unchecked"}A.displayName=N;var D=a(58450),L=a(4780);let T=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(v,{ref:a,className:(0,L.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,r.jsx)(b,{className:(0,L.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(D.A,{className:"h-4 w-4"})})}));T.displayName=v.displayName},90327:(e,t,a)=>{a.d(t,{f:()=>i});var r=a(47138),s=a(35780);function i(e,t){let a=(0,r.a)(e);return isNaN(t)?(0,s.w)(e,NaN):(t&&a.setDate(a.getDate()+t),a)}},97025:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(82614).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}};