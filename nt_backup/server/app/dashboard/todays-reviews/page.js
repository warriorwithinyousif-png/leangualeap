(()=>{var e={};e.id=3276,e.ids=[3276],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3662:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15098:(e,t,r)=>{"use strict";r.d(t,{MI:()=>p,kh:()=>x,np:()=>m});var s=r(60687),a=r(33660),i=r(96305),n=r(43146),o=r(75535),l=r(54254);let d={review_word:5,spell_correct:5,daily_login:20,master_word:10,grammar_test:20},c=e=>({timeSpentSeconds:0,totalWordsReviewed:0,xp:0,reviewedToday:{count:0,date:e,timeSpentSeconds:0,completedTests:[]},activityLog:[],spellingPractice:{count:0,date:e},lastLoginDate:"1970-01-01",weekStartDate:(0,a.k)(new Date,{weekStartsOn:1}).toISOString(),lastWeek:null,hasSeenLastWeekResults:!0});async function u(e){let t=query((0,o.rJ)(l.db,"users"),where("supervisorId","==",e)),r=await (0,o.GG)(t);return await Promise.all(r.docs.map(async e=>{let t={...e.data(),id:e.id},r=await p(t.id);return{user:t,stats:r}}))}let p=async e=>{let t,r,s=new Date,n=s.toLocaleDateString("en-CA"),d=(0,a.k)(s,{weekStartsOn:1}),p=`${s.getFullYear()}-${(0,i.N)(s,{weekStartsOn:1})}`,x=(0,o.H9)(l.db,`users/${e}/app-data/stats`),m=await (0,o.x7)(x);m.exists()?t=m.data():(t=c(n),await (0,o.BN)(x,t)),"number"!=typeof t.xp&&(t.xp=0),t.lastLoginDate||(t.lastLoginDate="1970-01-01"),t.weekStartDate||(t.weekStartDate=d.toISOString()),"boolean"!=typeof t.hasSeenLastWeekResults&&(t.hasSeenLastWeekResults=!0);let f=new Date(t.weekStartDate),w=`${f.getFullYear()}-${(0,i.N)(f,{weekStartsOn:1})}`;if(p!==w&&!t.lastWeek?.weekId?.endsWith(w)&&(r=await h(e),r?.supervisorId)){let e=await u(r.supervisorId),s=e.map(({user:e,stats:t})=>({...e,xp:t.xp})).sort((e,t)=>t.xp-e.xp).slice(0,3).map((e,t)=>({id:e.id,name:e.name,avatar:e.avatar,xp:e.xp,rank:t+1}));for(let{user:t}of e){let e=(0,o.H9)(l.db,`users/${t.id}/app-data/stats`);await (0,o.BN)(e,{xp:0,weekStartDate:d.toISOString(),lastWeek:{weekId:w,winners:s},hasSeenLastWeekResults:!1},{merge:!0})}let a=await (0,o.x7)(x);a.exists()&&(t=a.data())}return t.reviewedToday&&t.reviewedToday.date===n||(t.reviewedToday={count:0,date:n,timeSpentSeconds:0,completedTests:[]}),t.spellingPractice&&t.spellingPractice.date===n||(t.spellingPractice={count:0,date:n}),Array.isArray(t.activityLog)||(t.activityLog=[]),Array.isArray(t.reviewedToday.completedTests)||(t.reviewedToday.completedTests=[]),"number"!=typeof t.reviewedToday.timeSpentSeconds&&(t.reviewedToday.timeSpentSeconds=0),t},x=async(e,t)=>{if(!e)return{updated:!1,amount:0};let r=await p(e),s=d[t],a=new Date().toLocaleDateString("en-CA");if("daily_login"===t){if(r.lastLoginDate===a)return{updated:!1,amount:0};r.lastLoginDate=a}r.xp+=s;let i=(0,o.H9)(l.db,`users/${e}/app-data/stats`);return await (0,o.BN)(i,r,{merge:!0}),{updated:!0,amount:s}},m=async({userId:e,reviewedCount:t=0,durationSeconds:r=0,testName:a,spelledCount:i=0,toast:c,markAsSeen:u=!1})=>{if(!e)return;let x=await p(e),m=new Date().toLocaleDateString("en-CA");x.totalWordsReviewed+=t,x.timeSpentSeconds+=r,x.reviewedToday.count+=t,x.reviewedToday.timeSpentSeconds+=r,x.spellingPractice.count+=i,x.activityLog.includes(m)||x.activityLog.push(m),a&&!x.reviewedToday.completedTests.includes(a)&&(x.reviewedToday.completedTests.push(a),x.xp+=d.grammar_test,c&&c({description:(0,s.jsx)(n.Y,{event:"grammar_test",amount:d.grammar_test}),duration:3e3})),u&&(x.hasSeenLastWeekResults=!0);let h=(0,o.H9)(l.db,`users/${e}/app-data/stats`);await (0,o.BN)(h,x,{merge:!0})};async function h(e){if(!e)return;let t=(0,o.H9)(l.db,"users",e),r=await (0,o.x7)(t);if(!r.exists())return;let s=r.data();return s.trialExpiresAt&&s.trialExpiresAt instanceof Timestamp&&(s.trialExpiresAt=s.trialExpiresAt.toDate().toISOString()),{...s,id:r.id}}},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32132:(e,t,r)=>{Promise.resolve().then(r.bind(r,89049))},32467:e=>{"use strict";e.exports=require("node:http2")},33873:e=>{"use strict";e.exports=require("path")},34589:e=>{"use strict";e.exports=require("node:assert")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37540:e=>{"use strict";e.exports=require("node:console")},41204:e=>{"use strict";e.exports=require("string_decoder")},41692:e=>{"use strict";e.exports=require("node:tls")},41792:e=>{"use strict";e.exports=require("node:querystring")},43146:(e,t,r)=>{"use strict";r.d(t,{Y:()=>u});var s=r(60687),a=r(97034),i=r(51212),n=r(26622),o=r(53098),l=r(916),d=r(94363);let c={review_word:(0,s.jsx)(a.A,{className:"h-5 w-5 text-green-500"}),spell_correct:(0,s.jsx)(i.A,{className:"h-5 w-5 text-green-500"}),daily_login:(0,s.jsx)(n.A,{className:"h-5 w-5 text-green-500"}),master_word:(0,s.jsx)(o.A,{className:"h-5 w-5 text-yellow-500"}),grammar_test:(0,s.jsx)(o.A,{className:"h-5 w-5 text-yellow-500"})};function u({event:e,amount:t}){let{t:r}=(0,d.o)(),a=r(`xpEvents.${e}`),i=c[e];return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[i,(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-semibold",children:a}),(0,s.jsxs)("span",{className:"flex items-center gap-1 text-sm text-yellow-500 font-bold",children:["+",t," XP",(0,s.jsx)(l.A,{className:"h-4 w-4 fill-current"})]})]})]})}},44493:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>u});var s=r(60687),a=r(43210),i=r(4780);let n=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},48744:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a});var s=r(79396);let a=async(e,t,r)=>{if(!e||!t)return;let a={id:t,studentId:e,strength:r.strength,nextReview:r.nextReview};try{await (0,s.i2)(e,[a])}catch(e){console.error("Failed to update student progress in Firestore",e)}}},50812:(e,t,r)=>{"use strict";r.d(t,{C:()=>d,z:()=>l});var s=r(60687),a=r(43210),i=r(14555),n=r(73256),o=r(4780);let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.bL,{className:(0,o.cn)("grid gap-2",e),...t,ref:r}));l.displayName=i.bL.displayName;let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.q7,{ref:r,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,s.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}));d.displayName=i.q7.displayName},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},55511:e=>{"use strict";e.exports=require("crypto")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},60516:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/leangualeap/src/app/dashboard/todays-reviews/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/leangualeap/src/app/dashboard/todays-reviews/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73136:e=>{"use strict";e.exports=require("node:url")},73429:e=>{"use strict";e.exports=require("node:util/types")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},78980:(e,t,r)=>{Promise.resolve().then(r.bind(r,60516))},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(60687),a=r(43210),i=r(78148),n=r(24224),o=r(4780);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.b,{ref:r,className:(0,o.cn)(l(),e),...t}));d.displayName=i.b.displayName},81630:e=>{"use strict";e.exports=require("http")},89049:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var s=r(60687),a=r(43210),i=r(16189),n=r(79396),o=r(44493),l=r(30474),d=r(50812),c=r(80013),u=r(29523),p=r(4780),x=r(3662),m=r(97025),h=r(26622),f=r(916),w=r(94363);function g({word:e,onCorrect:t,onIncorrect:r}){let[i,n]=(0,a.useState)(null),[g,y]=(0,a.useState)("question"),[v,b]=(0,a.useState)(!1),[j,k]=(0,a.useState)([]),{t:N}=(0,w.o)(),[q,S]=(0,a.useState)(!1),C=t=>"feedback"!==g?"default":t===e.correctOption?"correct":t===i&&t!==e.correctOption?"incorrect":"default",D=e=>{switch(e){case"correct":return"text-green-500";case"incorrect":return"text-destructive";default:return"text-primary"}},_=e=>{q||(S(!0),t(e))},A=()=>{let t=e.strength||0;return t<=1?"tomorrow":2===t?"twoDays":3===t?"week":4===t?"twoWeeks":"month"};return(0,s.jsxs)(o.Zp,{className:"w-full",children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{className:"text-center text-4xl font-headline flex items-center justify-center gap-4",children:(0,s.jsx)("span",{children:e.definition})})}),"schedule"===g?(()=>{let t=A(),r=[{key:"tomorrow",label:N("quizCard.schedule.tomorrow")},{key:"twoDays",label:N("quizCard.schedule.inTwoDays")},{key:"week",label:N("quizCard.schedule.inAWeek")},{key:"twoWeeks",label:N("quizCard.schedule.inTwoWeeks")},{key:"month",label:N("quizCard.schedule.inAMonth")}];return(0,s.jsxs)(o.Wu,{className:"flex flex-col items-center justify-center space-y-4 pt-6",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)(l.default,{src:e.imageUrl,alt:`Image for ${e.word}`,width:150,height:100,className:"rounded-lg object-cover"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold",children:N("quizCard.schedule.title")}),(0,s.jsx)("p",{className:"text-muted-foreground",children:N("quizCard.schedule.description")}),(0,s.jsxs)("div",{className:"w-full space-y-2",children:[r.map(({key:e,label:r})=>{let a=e===t;return(0,s.jsxs)(u.$,{onClick:()=>_(e),variant:a?"default":"outline",className:"w-full justify-start relative",disabled:q,children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),r,a&&(0,s.jsx)("span",{className:"absolute right-2 text-xs bg-primary-foreground/20 text-white py-0.5 px-1.5 rounded-full",children:N("quizCard.schedule.recommended")})]},e)}),(0,s.jsxs)(u.$,{onClick:()=>_("mastered"),variant:"secondary",className:"w-full justify-start",disabled:q,children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),N("quizCard.schedule.mastered")]})]})]})})():(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Wu,{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(l.default,{src:e.imageUrl,alt:`Image for ${e.word}`,width:300,height:200,className:"rounded-lg object-cover"})}),(0,s.jsx)(d.z,{value:i||"",onValueChange:n,disabled:"question"!==g,children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(e=>{let t=C(e);return(0,s.jsxs)(c.J,{className:(0,p.cn)("flex items-center space-x-3 rounded-lg border p-4 cursor-pointer transition-all","correct"===t&&"border-green-500 bg-green-500/10","incorrect"===t&&"border-destructive bg-destructive/10","question"===g&&i===e&&"border-primary bg-primary/10"),children:[(0,s.jsx)(d.C,{value:e,id:e,className:D(t)}),(0,s.jsx)("span",{className:"font-medium text-base",children:e}),"correct"===t&&(0,s.jsx)(x.A,{className:"ml-auto h-5 w-5 text-green-500"}),"incorrect"===t&&(0,s.jsx)(m.A,{className:"ml-auto h-5 w-5 text-destructive"})]},e)})})})]}),(0,s.jsx)(o.wL,{className:"flex justify-center",children:(0,s.jsx)(u.$,{onClick:()=>{if(!i)return;let t=i===e.correctOption;b(t),y("feedback"),setTimeout(()=>{t?y("schedule"):r()},1500)},disabled:!i||"question"!==g,className:"w-full",children:N("quizCard.checkAnswer")})})]})]})}var y=r(48744);function v({children:e}){let[t,r]=(0,a.useState)(!1);return t?(0,s.jsx)(s.Fragment,{children:e}):null}var b=r(85814),j=r.n(b);let k=(0,r(82614).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var N=r(15098),q=r(29867),S=r(43146);function C(){let e=(0,i.useSearchParams)(),{t}=(0,w.o)(),{toast:r}=(0,q.dj)(),[o,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1);(0,a.useRef)(null);let p=e.get("userId"),x=(0,a.useCallback)(async()=>{if(p){let e=await (0,n.CH)(p,null,null,"today");l(e),e||c(!0)}},[p]),m=(0,a.useCallback)(async(e,t)=>{p&&await (0,N.np)({userId:p,reviewedCount:e,durationSeconds:t})},[p]),h=async e=>{if(!o||!p)return;let t=o.strength>=0?o.strength+1:1,a=new Date,i="review_word";switch(e){case"tomorrow":a.setDate(a.getDate()+1);break;case"twoDays":a.setDate(a.getDate()+2);break;case"week":a.setDate(a.getDate()+7);break;case"twoWeeks":a.setDate(a.getDate()+14);break;case"month":a.setMonth(a.getMonth()+1);break;case"mastered":t=-1,i="master_word"}await (0,y.Q)(p,o.id,{strength:t,nextReview:a}),await m(1,0);let{amount:n}=await (0,N.kh)(p,i);r({description:(0,s.jsx)(S.Y,{event:i,amount:n}),duration:3e3}),x()},f=async()=>{if(!o||!p)return;let e=Math.max(0,o.strength-1),t=new Date;t.setDate(t.getDate()+1),await (0,y.Q)(p,o.id,{strength:e,nextReview:t}),await m(1,0);let{amount:a}=await (0,N.kh)(p,"review_word");r({description:(0,s.jsx)(S.Y,{event:"review_word",amount:a}),duration:3e3}),x()};return p?(0,s.jsx)(v,{children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-secondary",children:(0,s.jsxs)("div",{className:"w-full max-w-2xl",children:[(0,s.jsx)(u.$,{variant:"secondary",size:"icon",asChild:!0,className:"absolute top-4 left-4 rounded-full",children:(0,s.jsxs)(j(),{href:`/dashboard?userId=${p}`,children:[(0,s.jsx)(k,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:t("learn.backToDashboard")})]})}),d?(0,s.jsxs)("div",{className:"text-center p-8 bg-card rounded-lg shadow-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold font-headline mb-4",children:t("learn.sessionFinished.title")}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:t("learn.sessionFinished.description")}),(0,s.jsx)(u.$,{asChild:!0,children:(0,s.jsx)(j(),{href:`/dashboard?userId=${p}`,children:t("learn.backToDashboard")})})]}):o?(0,s.jsx)(g,{word:o,onCorrect:h,onIncorrect:f},o.id):(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{children:t("dashboard.loading")})})]})})}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"User not found. Please log in again."})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97025:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},97949:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),n=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["dashboard",{children:["todays-reviews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,60516)),"/home/user/leangualeap/src/app/dashboard/todays-reviews/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,90814)),"/home/user/leangualeap/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/leangualeap/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/leangualeap/src/app/dashboard/todays-reviews/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/todays-reviews/page",pathname:"/dashboard/todays-reviews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,2479,1658,6232,474,8292,2251,3053],()=>r(97949));module.exports=s})();